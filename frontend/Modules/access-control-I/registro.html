  <script>
    // Solo permitir acceso a admin (role_id === 1)
    (function () {
      const raw = localStorage.getItem('sigra_user')
      let user = null
      try { user = JSON.parse(raw) } catch (_) {}
      if (!user || Number(user.role_id) !== 1) {
        window.location.href = 'user-table.html'
      }
    })()
  </script>
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SIGRA | Crear Cuenta</title>
  <link rel="stylesheet" href="login.css" />
  <link rel="stylesheet" href="registro.css" />
  <!-- navbar/back-button styling is handled in registro.css -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <header>
    <nav class="navbar" aria-label="Barra de navegación principal">
      <a class="brand" aria-label="SIGRA" href="user-table.html">
        <img class="brand-logo" src="../../Public/resources/Modulo-1/logo.png" alt="Logo SIGRA" />
        <span>SIGRA</span>
      </a>

      <div class="nav-links" role="list">
        <a href="user-table.html" role="listitem">Inicio</a>
        <a class="active" href="registro.html" role="listitem">Crear Usuario</a>
      </div>

      <div class="profile-menu" aria-label="Menú de perfil">
        <button class="profile-button" id="profile-button" type="button" aria-haspopup="true" aria-expanded="false">
          <span class="profile-avatar" id="profile-avatar" aria-hidden="true">--</span>
          <span class="sr-only">Abrir menú de perfil</span>
        </button>
        <div class="profile-dropdown" id="profile-dropdown" role="menu">
          <ul class="profile-list" role="menu">
            <li class="profile-info" id="profile-info-name" role="presentation">Usuario</li>
            <li role="none"><button type="button" class="profile-item" data-profile-action="view" role="menuitem">Ver usuario</button></li>
            <li role="none"><button type="button" class="profile-item" data-profile-action="edit" role="menuitem">Editar usuario</button></li>
            <li role="none"><button type="button" class="profile-item" data-profile-action="logout" role="menuitem">Cerrar sesión</button></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <main class="page">
    <div class="brand">
      <img class="brand-logo" src="../../Public/resources/Modulo-1/logo.png" alt="Logo SIGRA" />
      <p class="brand-text"><span class="brand-accent">SIGRA:</span> Sistema Integral de Gestión y Registro Académico
      </p>
    </div>

    <h1 class="page-title">Crear Cuenta</h1>

    <section class="card" aria-label="Formulario de registro">
      <form class="form" id="registro-form" novalidate>

        <div class="input-group">
          <label class="input-label" for="names">Nombres</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z" />
                <path d="M20 21c0-3.5-3.5-6-8-6s-8 2.5-8 6" stroke-linecap="round" />
              </svg>
            </span>
            <input id="names" type="text" placeholder="Ej. Juan Carlos" required />
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="lastnames">Apellidos</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z" />
                <path d="M20 21c0-3.5-3.5-6-8-6s-8 2.5-8 6" stroke-linecap="round" />
              </svg>
            </span>
            <input id="lastnames" type="text" placeholder="Ej. Pérez Delgado" required />
          </div>
        </div>
        
        <div class="input-group">
          <label class="input-label" for="national_id">Cédula</label>
          <div class="input-control">
            <span class="input-icon" style="font-weight: bold; font-size: 1rem;">CI</span>
            <input id="national_id" type="text" placeholder="12345678" pattern="[0-9]{8}" maxlength="8" minlength="8" required />
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="email">Correo Electrónico</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M4 7l8 5 8-5" />
                <rect x="3" y="5" width="18" height="14" rx="2" />
              </svg>
            </span>
            <input id="email" type="email" placeholder="usuario@correo.com" required />
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="phone">Teléfono</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
              </svg>
            </span>
            <input id="phone" type="tel" placeholder="0412234..." pattern="[0-9]{11}" maxlength="11" minlength="11" required />
            <script>
              // Solo permitir acceso a admin (role_id === 1)
              (function () {
                const raw = localStorage.getItem('sigra_user')
                let user = null
                try { user = JSON.parse(raw) } catch (_) {}
                if (!user || Number(user.role_id) !== 1) {
                  window.location.href = 'user-table.html'
                }
              })()

              // Validar que el teléfono tenga exactamente 11 dígitos numéricos
              document.addEventListener('DOMContentLoaded', function () {
                const phoneInput = document.getElementById('phone');
                if (phoneInput) {
                  phoneInput.addEventListener('input', function () {
                    // Solo permitir números
                    this.value = this.value.replace(/[^0-9]/g, '');
                    // Limitar a 11 caracteres
                    if (this.value.length > 11) {
                      this.value = this.value.slice(0, 11);
                    }
                  });
                }
              });
            </script>
          </div>
        </div>

        <div id="dynamic-fields-container" class="dynamic-fields-container">
        </div>

        <div class="input-group">
          <label class="input-label" for="password">Contraseña</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="10" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.5" />
                <path d="M8 10V7a4 4 0 1 1 8 0v3" stroke="currentColor" stroke-width="1.5" />
              </svg>
            </span>
            <input id="password" type="password" placeholder="Crea tu contraseña" required />
            <button class="ghost-button toggle-pass" type="button" data-target="password"
              aria-label="Mostrar u ocultar contraseña">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </button>
          </div>
        </div>

        <div class="input-group">
          <label class="input-label" for="confirm-password">Confirmar Contraseña</label>
          <div class="input-control">
            <span class="input-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="10" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.5" />
                <path d="M8 10V7a4 4 0 1 1 8 0v3" stroke="currentColor" stroke-width="1.5" />
              </svg>
            </span>
            <input id="confirm-password" type="password" placeholder="Repite tu contraseña" required />
            <button class="ghost-button toggle-pass" type="button" data-target="confirm-password"
              aria-label="Mostrar u ocultar confirmación de contraseña">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </button>
          </div>
        </div>

        <button class="primary-button" id="btnAceptar" type="button">Aceptar</button>



      </form>
    </section>

    <footer class="footer">
      <a href="#">Ayuda</a>
      <a href="#">Privacidad</a>
    </footer>
  </main>

  <script>
    // Lógica para los "Ojos" (Toggle Visibility)
    // Seleccionamos todos los botones que tengan la clase 'toggle-pass'
    document.querySelectorAll('.toggle-pass').forEach(button => {
      button.addEventListener('click', function () {
        // Obtenemos el ID del input asociado desde el atributo data-target
        const targetId = this.getAttribute('data-target');
        const input = document.getElementById(targetId);

        // Cambiamos el tipo de input
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);

        // (Opcional) Aquí podrías cambiar el ícono SVG si quisieras mostrar un ojo tachado
        this.classList.toggle('active');
      });
    });
  </script>

  <script src="registro-navbar.js"></script>
  <script src="registro.js"></script>
</body>

</html>